{"version":3,"sources":["webpack:///./node_modules/art-template/lib/runtime.js","webpack:///./C:/Users/lenovo/AppData/Roaming/npm/node_modules/webpack/buildin/global.js","webpack:///./D:/Github/art-template-v4/source/views/list.html","webpack:///./D:/Github/art-template-v4/source/views/include.html","webpack:///./source/dateFormat.js","webpack:///./node_modules/detect-node/index.js","webpack:///./node_modules/art-template/lib/compile/runtime.js","webpack:///./source/helper.js","webpack:///./source/index.js"],"names":["module","exports","__webpack_require__","g","this","Function","eval","e","window","_typeof","$each","$imports","users","$data","$escape","$value","$index","$$out","name","email","dateFormat","birthday","admin","length","functionsMap","M","date","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","q","Math","floor","S","getMilliseconds","formatReg","format","mts","match","parseInt","Date","toUTCString","replace","all","t","v","undefined","slice","getFullYear","Object","prototype","toString","call","global","process","detectNode","runtime","create","ESCAPE_REG","content","html","regexResult","exec","result","i","lastIndex","char","index","charCodeAt","substring","xmlEscape","value","JSON","stringify","data","callback","Array","isArray","len","_i","_runtime2","_dateFormat2","tem","setTimeout","then","__esModule","assign","default","sub","console","log","document","body","insertAdjacentHTML","innerHTML"],"mappings":"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","file":"main.js","sourcesContent":["'use strict';\n\nmodule.exports = require('./compile/runtime');","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","list for example:<ul> {{each users}} <li>{{$value.name}}:{{$value.email}}. born at {{$value.birthday | dateFormat:'yyyyMMdd'}}</li> {{/each}} </ul>","this page is here for ready to be included.<br> {{if admin}} Welcome, administrator! {{else if users}} Welcome, <b>{{users.length}}</b> {{/if}} <br> {{include './list.html'}}","let functionsMap = {\r\n    \"M\": date => (date.getMonth() + 1), //月份\r\n    \"d\": date => (date.getDate()), //日\r\n    \"h\": date => (date.getHours()), //小时\r\n    \"m\": date => (date.getMinutes()), //分\r\n    \"s\": date => (date.getSeconds()), //秒\r\n    \"q\": date => (Math.floor((date.getMonth() + 3) / 3)), //季度\r\n    \"S\": date => (date.getMilliseconds()) //毫秒\r\n}\r\nlet formatReg = /([yMdhmsqS])\\1*/g;\r\nlet dateFormat =  function (date, format) {\r\n    // console.log(date, format);\r\n    if (typeof date === \"string\") {\r\n        var mts = date.match(/(\\/Date\\((\\d+)\\)\\/)/);\r\n        if (mts && mts.length >= 3) {\r\n            date = parseInt(mts[2]);\r\n        }\r\n    }\r\n    date = new Date(date);\r\n    if (!date || date.toUTCString() == \"Invalid Date\") {\r\n        return \"\";\r\n    }\r\n\r\n\r\n    return format.replace(formatReg, function(all, t){\r\n        var v = functionsMap[t];\r\n        // console.log(v, all, t);\r\n        if(v !== undefined){\r\n            v = v(date);\r\n            if(all.length > 1){\r\n                v = '0' + v;\r\n                v = v.slice(-2);\r\n            }\r\n            return v;\r\n        }\r\n        else if(t === 'y'){\r\n            return (date.getFullYear() + '').slice(-4);\r\n        }\r\n        return all;\r\n    });\r\n    \r\n    // return format;\r\n};\r\n\r\n// module.exports = dateFormat;\r\nexport default dateFormat;","module.exports = false;\n\n// Only Node.JS has a process variable that is of [[Class]] process\ntry {\n module.exports = Object.prototype.toString.call(global.process) === '[object process]' \n} catch(e) {}\n","'use strict';\n\n/*! art-template@runtime | https://github.com/aui/art-template */\n\nvar detectNode = require('detect-node');\nvar runtime = Object.create(detectNode ? global : window);\nvar ESCAPE_REG = /[\"&'<>]/;\n\n/**\n * 编码模板输出的内容\n * @param  {any}        content\n * @return {string}\n */\nruntime.$escape = function (content) {\n    return xmlEscape(toString(content));\n};\n\n/**\n * 迭代器，支持数组与对象\n * @param {array|Object} data \n * @param {function}     callback \n */\nruntime.$each = function (data, callback) {\n    if (Array.isArray(data)) {\n        for (var i = 0, len = data.length; i < len; i++) {\n            callback(data[i], i);\n        }\n    } else {\n        for (var _i in data) {\n            callback(data[_i], _i);\n        }\n    }\n};\n\n// 将目标转成字符\nfunction toString(value) {\n    if (typeof value !== 'string') {\n        if (value === undefined || value === null) {\n            value = '';\n        } else if (typeof value === 'function') {\n            value = toString(value.call(value));\n        } else {\n            value = JSON.stringify(value);\n        }\n    }\n\n    return value;\n};\n\n// 编码 HTML 内容\nfunction xmlEscape(content) {\n    var html = '' + content;\n    var regexResult = ESCAPE_REG.exec(html);\n    if (!regexResult) {\n        return content;\n    }\n\n    var result = '';\n    var i = void 0,\n        lastIndex = void 0,\n        char = void 0;\n    for (i = regexResult.index, lastIndex = 0; i < html.length; i++) {\n\n        switch (html.charCodeAt(i)) {\n            case 34:\n                char = '&#34;';\n                break;\n            case 38:\n                char = '&#38;';\n                break;\n            case 39:\n                char = '&#39;';\n                break;\n            case 60:\n                char = '&#60;';\n                break;\n            case 62:\n                char = '&#62;';\n                break;\n            default:\n                continue;\n        }\n\n        if (lastIndex !== i) {\n            result += html.substring(lastIndex, i);\n        }\n\n        lastIndex = i + 1;\n        result += char;\n    }\n\n    if (lastIndex !== i) {\n        return result + html.substring(lastIndex, i);\n    } else {\n        return result;\n    }\n};\n\nmodule.exports = runtime;","// const runtime = require('art-template/lib/runtime');\r\nimport runtime from 'art-template/lib/runtime';\r\n// if the target module is exported by CommonJS Module, here we can use `require` or import x from xx\r\n// let dateFormat = require('./dateFormat');\r\nimport dateFormat from './dateFormat';\r\n// but if the target module is exported by es6's `export`, best use `import` here\r\n// if you have to use `require` , you must call it's 'default' property to get the actual module. For example:\r\n// let dateFormat = require('./dateFormat').default;\r\n// so, es6 module is the standard and best way.\r\n// console.log(dateFormat);\r\nruntime.dateFormat = dateFormat\r\n\r\nexport default runtime;\r\n// module.exports = runtime;\r\n","// the 'tem' will be a render function, not a template source string.\r\n// let tem = require('./views/extend.html');\r\nrequire('./helper');\r\n// import runtime from './helper';\r\n\r\nlet tem = require('./views/include.html');\r\n\r\n// this import() function is an async 'require' way in webpack 2.\r\n// we can specify the chunk name by a 'magic comment'\r\nsetTimeout(() => {\r\n    // console.log('setTimeout');\r\n    // 直接 import 一个 html , 在IE下静默失败, 不知为何\r\n    // 要使用 webpackChunkName, 需在 babel 中配置 comments: true. 不然 babel 在转换时会丢掉 magic comments\r\n    import(/* webpackChunkName: \"sub\" */ './views/sub.html').then(function (sub) {\r\n        console.log(111111,data, sub.default(data));\r\n        document.body.insertAdjacentHTML('beforeend', sub.default(data));\r\n    });\r\n    // 但通过JS包裹一层再导入, 则正常执行\r\n    // import('./combine').then(function (combined) {\r\n    //     console.log(combined, combined['sub']);\r\n    //     document.body.insertAdjacentHTML('beforeend', combined.sub(data));\r\n    // });\r\n}, 1000)\r\n\r\nlet data = {\r\n    users: [{\r\n        name: 'xlee',\r\n        email: 'xxxjs@email.com',\r\n        birthday: new Date()\r\n    },{\r\n        name: 'breeco',\r\n        email: 'breeco@gmail.com',\r\n        birthday: new Date(2000, 11, 22)\r\n    }],\r\n    admin: false\r\n}\r\n\r\nlet html = tem(data);\r\n\r\n// console.log(html);\r\ndocument.body.innerHTML = html;\r\nexport default tem;"],"sourceRoot":""}